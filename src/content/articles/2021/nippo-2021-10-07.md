---
title: Vue2 と Vue3 の defineComponent 型に互換性がない
description: 日報
publishedAt: 2021-10-07
---

2021-10-07 日報。

- 諸事情により vite で vue2 を動かしている
  - https://github.com/underfin/vite-plugin-vue2
    - @vitejs/plugin-vue の替わりに使う
  - vite + vue 周りのエコシステム（vite-plugin-pagesやlayoutsなど）は vue3 を前提とするものが多く辛い
  - 本来は vue3 で開発したいが、そうもいかないこともある
    - コンポーネントライブラリを開発する際に vue2 のプロジェクトでも使いたい
    - vue2 向けと vue3 向けでそれぞれパッケージ開発するのが主流っぽい
      - 実質別プロジェクトを管理することになり辛い
        - コードベースはある程度使いまわせるが
    - vue3 コードで開発しつつ vue2 で使えて欲しい
      - eslint を vue3 向けのものにしつつ vue2 と互換性のある記述を用いる
        - Teleport や Suspense などを使わない
        - Flagment を使わない
        - tsx を諦める
        - etc.
      - これで行けると思ったが型周りがダメだった
      - vue3 から使える `defineComponent` の型と `@vue/composition-api` から使える `defineComponent` の型に互換性がなかった
        - vue3 の `ComponentOptions` 型には 
